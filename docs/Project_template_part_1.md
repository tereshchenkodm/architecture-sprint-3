# Задание 1. Анализ и планирование

## Определение доменов и границ контекстов
- **Домен "Управление отоплением":** Включение / выключение отопления
- **Домен "Управление светом":** Включение / выключение света
- **Домен "Управление воротами":** Открытие / закрытие ворот
- **Домен "Управление видеонаблюдением":** Включение / выключение / переключение видеонаблюдения
- **Домен "Регистрация, авторизация, аутентификация":** Управление пользователями

## Анализ проблем монолитного приложения

Сейчас эффективному выполнению задач по расширению функционала и масштабированию системы у нас есть несколько препятствий:

- Отказоустойчивость: если падаем, то полностью и стопаем работу всего сервиса
- Сложность разработки в монолите: постоянные мердж конфликты в коде у разработчиков
- Масштабирование: мы не можем масштабировать высоко нагруженное узкое место нашего сервиса - только весь сервис целиком
- Синхронное взаимодействие: при росте нагрузки увеличивается время ответа
- Длительный цикл разработки и раскатки новых фич и фиксов: нужен полный регресс всего функционала всего сервиса



## Визуализация контекста монолитного приложения

/docs/Context.puml - схема контекста

# Задание 2. Проектирование микросервисной архитектуры

## 1. Декомпозиция приложения на микросервисы

### User Service

- Создание/удаление пользователей
- Хранение пользовательских данных
- Авторизация и аутентификация пользователей

### Heating Service

- Включение отопления
- Выключение отопления

### Lighting Service

- Включение света
- Выключение света

### Garage Service

- Открытие ворот
- Закрытие ворот

### Surveillance Service

- Включение видеонаблюдения
- Выключение видеонаблюдения
- Переключение видеонаблюдения

### Telemetry Service

- Получение и хранение информации, полученной от датчиков

### Kafka

Используется для асинхронного обмена сообщениями между микросервисами.

### API Gateway

Единая точка входа в приложение, управление маршрутизацией, управление безопасностью (авторизация и аутентификация)

## 2. Взаимодействия между компонентами

### Связи между микросервисами

- С User Service взаимодействие синхронное, с остальными @Async
- API Gateway - единая точка входа для взаимодействия пользователя и системы

### Kafka и микросервисы

Kafka выступает брокером сообщений, через которые микросервисы получают данные и отправляют запросы в другие.

### БД и микросервисы

- Каждый микросервис имеет свою БД

## 3. Визуализация архитектуры:

- /docs/Container.puml - диаграмма контейнеров
- /docs/GarageServiceComponent.puml - диаграмма компонента
- /docs/HeatingServiceComponent.puml - диаграмма компонента
- /docs/LightingServiceComponent.puml - диаграмма компонента
- /docs/SurvellianceServiceComponent.puml - диаграмма компонента
- /docs/TelemetryServiceComponent.puml - диаграмма компонента
- /docs/UserServiceComponent.puml - диаграмма компонента
- /docs/Code.puml - диаграмма кода

# Задание 3. Разработка ER-диаграммы

- /docs/ER_diagram.puml - ER-диаграмма

